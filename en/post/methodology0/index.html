<!DOCTYPE html>
<html lang="en">
<head><meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<script type="application/ld+json">
    {
        "@context" : "http://schema.org",
        "@type" : "BlogPosting",
        "mainEntityOfPage": {
             "@type": "WebPage",
             "@id": "/"
        },
        "articleSection" : "post",
        "name" : "Merging the Data",
        "headline" : "Merging the Data",
        "description" : "Merging dataframes in R.",
        "inLanguage" : "pt-BR",
        "author" : "",
        "creator" : "",
        "publisher": "",
        "accountablePerson" : "",
        "copyrightHolder" : "",
        "copyrightYear" : "2016",
        "datePublished": "2016-07-15 00:00:00 &#43;0000 UTC",
        "dateModified" : "2016-07-15 00:00:00 &#43;0000 UTC",
        "url" : "/en/post/methodology0/",
        "wordCount" : "519",
        "image" : /%!s(&lt;nil&gt;)",
        "keywords" : [ "Code","R","Blog" ]   
    }
    </script>

 <title>Merging the Data </title>


<meta name="description" content="Merging dataframes in R." />


<meta name="viewport" content="width=device-width, initial-scale=1">
<meta name="robots" content="index,follow">
<meta name="googlebot" content="index,follow,snippet,archive">
<link rel="stylesheet" id="ct-tracks-google-fonts-css" href="//fonts.googleapis.com/css?family=Raleway%3A400%2C700&amp;subset=latin%2Clatin-ext&amp;ver=4.7.2" type="text/css" media="all">
<link rel="stylesheet" href="/css/font-awesome.min.css" type='text/css' media='all'>
<link rel="stylesheet" href="/css/bpg-nino-elite-caps.min.css" type='text/css' media='all'>
<link rel="stylesheet" href="/css/bpg-nino-elite-round-cond.min.css" type='text/css' media='all'>
<link rel="stylesheet" href="/css/bpg-nino-elite.min.css" type='text/css' media='all'>



<link href="/css/custom.css" rel="stylesheet" type='text/css' media='all'>


<link rel="shortcut icon" href="/img/favicon.ico" type="image/x-icon">
<link rel="icon" href="/img/favicon.ico" type="image/x-icon">






</head>


<body class="post-template-default single single-post single-format-standard ct-body singular singular-post not-front standard">
  
  <div id="overflow-container" class="overflow-container">
    <a class="skip-content" href="#main">Skip to content</a>
    <header id="site-header" class="site-header" role="banner">
      <div class='top-navigation'>
        <div class='container'>

  <div id="menu-secondary" class="menu-container menu-secondary" role="navigation">
    <button id="toggle-secondary-navigation" class="toggle-secondary-navigation"><i class="fa fa-plus"></i></button>

    <div class="menu">

      <ul id="menu-secondary-items" class="menu-secondary-items">
        
        <li id="menu-item" class="menu-item menu-item-type-taxonomy menu-item-object-category menu-item">
          <a href="/en/categories/analysis">Analysis</a>
        </li>
        
        <li id="menu-item" class="menu-item menu-item-type-taxonomy menu-item-object-category menu-item">
          <a href="/en/categories/methodology">Methodology</a>
        </li>
        
        <li id="menu-item" class="menu-item menu-item-type-taxonomy menu-item-object-category menu-item">
          <a href="/en/categories/sources">Sources</a>
        </li>
        
        
        
        <li id="menu-item" class="menu-item menu-item-type-taxonomy menu-item-object-category menu-item">
        <a href="/en/tags/"  >
            tags
        </a>
        </li>
        

      </ul>

    </div>

  </div>
 
 



  <ul class="social-media-icons">  
    
<h4></h4>
<ul class = "a">
    

        <a href="/post/methodology0/">ge </a>

    
</ul>

  
  

  
  </ul></div>

      </div>

      <div class="container">
        <div id="title-info" class="title-info">
  <div id='site-title' class='site-title'>
    
    <a href="/en"> Labour Market Study </a>
    </div>
  </div>
  <button id="toggle-navigation" class="toggle-navigation">
    <i class="fa fa-bars"></i>
  </button>

  <div id="menu-primary-tracks" class="menu-primary-tracks"></div>
  <div id="menu-primary" class="menu-container menu-primary" role="navigation">
    

    <div class="menu">
      <ul id="menu-primary-items" class="menu-primary-items">
        
        
        <li id="menu-item" class='menu-item menu-item-type-custom menu-item-object-custom '>
          <a href="/en">Home</a>
        </li>
        
        <li id="menu-item" class='menu-item menu-item-type-post_type menu-item-object-page '>
          <a href="/en/about/">About the study</a>
        </li>
        
        <li id="menu-item" class='menu-item menu-item-type-post_type menu-item-object-page '>
          <a href="/en/contact/">Get in touch</a>
        </li>
        
      </ul>
    </div>

  </div>

      </div>
    </header>

    <div id="main" class="main" role="main">
      
      
  <div id="loop-container" class="loop-container">
    

      <div class="post type-post status-publish format-standard hentry category-standard category-travel entry full-without-featured odd excerpt-1">

        
        <div class="entry-meta">
          <span class="date">15 July 2016</span>	

          


          
          <span class="category">
            <span> / </span>

            <a href="/categories/Methodology">Methodology</a>
          </span>
          


        </div>
        <div class='entry-header'>
          <h1 class='entry-title'> Merging the Data</h1>
        </div>
        <div class="entry-container">
          <div class="entry-content">
            <article>
              <p>Sometimes the same job opening is advertised on multiple websites. Therefore, when attempting to merge the data from the three sources it is necessary to filter out the duplications. We have chosen the following three criteria for filtering: position name, employer and deadline. A few issues accompany these criteria:</p>
<!--more-->
<ul>
<li>Position name and employer are typically given in both English and Georgian on jobs.ge, while hr.ge publishes in one of these languages and hr.gov.ge always publishes in Georgian. When comparing these fields we consider both languages of jobs.ge.</li>
<li>In rare cases a position is posted on both hr.ge and jobs.ge but with a slightly altered name. For instance, on one website the position name might appear as “Credit Officer” with various locations listed in the location field and on the other as “Credit Officer in Tbilisi, Rustavi and Gori” with these locations listed in the name. However, as such instances are rather rare (15 in total out of over 17,000 job openings), we decided to postpone resolution of this issue to when we study the location field in more detail.</li>
<li>Considering the application deadline, we noticed that frequently a job posting appears on the second website with a few days delay from the original publication. As a result, the publication date and the deadline are accordingly moved by a few days. Therefore, we decided to consider the disparity of at most three days as acceptable when comparing the deadlines of job postings.
We check the criteria using the following function in R:</li>
</ul>
<pre class="r"><code>add_row_to_df &lt;- function(row, df, n = 4) {
  index1 &lt;- (row$position_cleaned == df$position_cleaned) | 
    (row$position_eng_cleaned == df$position_cleaned)
  index1[is.na(index1)] &lt;- FALSE
  if (any(index1) == FALSE) {test &lt;- FALSE} else {
    df1 &lt;- df[index1,]
    index2 &lt;- (row$employer_cleaned == df1$employer_cleaned) | 
      (row$employer_eng_cleaned == df1$employer_cleaned)
    index2[is.na(index2)] &lt;- FALSE
    if (any(index2) == FALSE) {test &lt;- FALSE} else {
      df2 &lt;- df1[index2,]
      x &lt;- row$ბოლო_ვადა[1] 
      if (is.na(x)) {test &lt;- TRUE} else {
        test &lt;- any(abs(x - c(as.Date(&quot;01011900&quot;, format = &#39;%d%m%Y&#39;), 
                            df2$ბოლო_ვადა[!is.na(df2$ბოლო_ვადა)])) &lt; n) 
      }
    }
  }
  return(!test)                          
}</code></pre>
<div style="float:right;position: relative;">
<p><img src="/img/methodology0/წყაროები_pic.jpg" width="300"></p>
</div>
<p>The function <code>add_row_to_df(row, df)</code> checks whether a job opening given in row (from, say, jobs.ge) appears in a database df (say, hr.ge). If it does, the function returns FALSE, meaning that the job opening should not be added to the database. If the job opening does not appear in the database, the function returns TRUE.</p>
<p>The next question is which one out of a given repeated pair or a triple should be kept in the database. As mentioned in <a href="https://e-labour.github.io/en/post/sources0/">the description of the sources</a>, hr.ge makes more of the essential details accessible easily from separate fields compared to jobs.ge. Moreover, out of the three websites hr.gov.ge publishes the largest amount of information in such a readily obtainable manner. Therefore, in case of duplications, we keep job posting from hr.jobs.ge whenever possible, then postings from hr.ge, and lastly, from jobs.ge.</p>
<p>Fun fact: according to our 2018 February-April records, 48% of the job postings come from hr.ge, 41% from jobs.ge and 11% from hr.gov.ge.</p>
<p>The code for filtering and merging the data is available on our <a href="https://github.com/e-labour/scrape">GitHub</a> page and is compatible with the code for retrieving the data.</p>

            </article>
          </div>
          
      <div class='entry-meta-bottom'>
        

  <div class="entry-categories"><p><span>categories</span>
    
    <a href="/en/categories/methodology" title="View all posts in Methodology">Methodology</a>
  </p>
</div>



<div class="entry-tags"><p><span>tags</span>
  
  <a href="/en/tags/code" title="View all posts tagged Code">Code</a>
  
  <a href="/en/tags/r" title="View all posts tagged R">R</a>
  

</p></div>	</div>








</div>
</div>

<section id="comments" class="comments">
  

  




</section>
</div>

 



    </div>

    <footer id="site-footer" class="site-footer" role="contentinfo">
	<h3>
    
    <a href=""> Labour Market Study </a>
    
	</h3>

			

		<div id="menu-footer" class="menu-container menu-footer" role="navigation">
		<div class="menu">

      <ul id="menu-footer-items" class="menu-footer-items">
        
</ul>

</div>	</div>



					<div class="design-credit">
		
		<p>&copy; 2018 Nino Ghvinadze and Ana Mamatelashvili</p>
		
	</div>
</footer>

  </div>
  <script src="/js/jquery.min.js"></script>
<script src="/js/jquerymigrate.js"></script>
<script src="/js/production.min.js"></script>

</body>
</html>
